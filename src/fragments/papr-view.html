<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/app-localize-behavior/app-localize-behavior.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../shared-styles.html">
<link rel="import" href="../redux/global-store.html">
<link rel="import" href="../redux/actions/auth-actions.html">

<dom-module id="papr-view">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
        padding: 10px 20px;
        @apply(--layout-vertical);
        height: 100vh;
        background-color: var(--primary-background-color);
      }
      a.link{
        @apply(--layout-self-end);
      }
    </style>
    <div class="vertical center flex">
      <paper-card class="vertical">
        <div class="card-content flex">
          <h4>[[localize('pay_done')]]</h4>
          <h5 class="text-accent">[[localize('subscribed_until','start', user.subscribedUntil)]]</h5>
        </div>
        <div class="card-actions vertical">
          <a href="/acco/membership" class="link">
            <paper-button raised class="primary">Regresar a mi Cuenta</paper-button>
          </a>

        </div>
      </paper-card>

    </div>
  </template>

  <script>
    Polymer({
      is: 'papr-view',

      behaviors : [
        Polymer.AppLocalizeBehavior,
        GlobalStoreBehavior,
        AuthActionsBehavior
      ],

      properties : {
          language : {
            type : String,
            statePath:'language'
          },
          user:{
            type:Object,
            statePath:'user.info'
          },
          resources : {
            value : function(){
              return {
                'en' : {
                  'pay_done' : 'Your payment has been completed succesfully',
                  'subscribed_until' : 'You are subscribed until { start , date , medium}'
                },
                'es' : {
                  'pay_done' : 'Tu pago se ha completado exitosamente',
                  'subscribed_until' : 'Tu subscrici√≥n dura hasta el: { start , date , medium}'
                }
              }
            }
          },

          subscribedUntil : {
            type : Date
          }
      },

      attached : function(e){
        this.dispatch('loadUserInfo');
      }

    });
  </script>
</dom-module>
