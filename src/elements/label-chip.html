<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-behaviors/iron-button-state.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animation-runner-behavior.html">
<link rel="import" href="../../bower_components/neon-animation/animations/fade-out-animation.html">
<link rel="import" href="../shared-styles.html">

<dom-module id="label-chip">
  <style include="app-grid-style shared-styles">
    :host {
      display: inline-block;
      vertical-align: top;
      position: relative;
      outline: none;
      font-size: 16px;
      cursor: default;
      margin: 0px 0;
      overflow: visible;
      margin-right: 2.5rem;
    }
    #main, #chip {
      border-radius: 16px;
    }
    #main {
      position: relative;
      height: 2.1rem;
    }
    #chip {
      box-sizing: border-box;
    }
    #label{
      padding: 0 4px 0 12px;
    }
    paper-icon-button{
      margin-top: -0.32rem;
    }
    div{
      margin-top: 0.15rem;
    }
    paper-material.chip{
      background-color : black;
      color : white;
    }
  </style>
  <template>
    <paper-material class="row chip" elevation="1" id="main" >
        <div id="label">[[item.text]]</div>
        <template is="dom-if" if="[[closeable]]">
          <paper-icon-button class="label" icon="close" on-tap="close"></paper-icon-button>
        </template>
    </paper-material>
  </template>
  <script>
    Polymer({
      is: 'label-chip',

      behaviors: [
        Polymer.NeonAnimationRunnerBehavior
      ],

      listeners : {
        'neon-animation-finish': '_onAnimationFinish'
      },

      properties : {
        item : {
          type : Object,
        },
        animationConfig: {
          type: Object,
          value: function() {
            return {
              'exit': [{
                name: 'fade-out-animation',
                node: this.$.main
              }]
            }
          }
        },
        closeable : {
          type : Boolean,
          value : false
        }
      },

      close: function() {
        this.playAnimation('exit');
      },

      _onAnimationFinish : function(){
        this.fire('closed',this.item);
      }
    });
  </script>
</dom-module>
