<dom-module id="paypal-integration">
  <script src="https://www.paypalobjects.com/api/checkout.js" async></script>
  <template>
    pay pal
    <div id="paypalDiv"></div>
  </template>
  <script>
    Polymer({
      is : 'paypal-integration',

      properties : {
        buttonAction : {
          type : String,
          value : '/checkoutPayment'
        }
      },

      attached : function(){
        this.payA = document.createElement('form');
        this.payA.style.position = 'absolute';
        this.payA.method = 'POST'
        var position = this.$.paypalDiv.getBoundingClientRect();
        this.payA.id = 'myContainer';
        this.payA.action = this.buttonAction;
        this.payA.style.left = (position.left-1) + 'px';
        this.payA.style.top = (position.top+1) + 'px';
        this.payA.locale = 'ES';
        this.payA.onClose = 'onClose';
        document.body.appendChild(this.payA);
        window.paypalCheckoutReady = function () {
          paypal.checkout.setup('YFRS3M7MDRHTW', {
              environment: 'sandbox',
              container: 'myContainer',
              locale : 'ES'
            });
          };
      },

      detached : function(){
        document.body.removeChild(this.payA);
      },

      onClose : function(e){
        window.location = '/';
      }
    });
  </script>
</dom-module>
