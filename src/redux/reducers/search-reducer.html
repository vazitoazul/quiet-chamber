<script>
  const {search:searchInit} = GlobalState;
  const search = (state=searchInit,action) => {
    switch(action.type){
      case 'SCH_POSTS':
        switch (action.status) {
          case 'success':
            return Object.assign({},state,{lastResult: action.results});
            break;
          case 'error':
            return Object.assign({},state,{lastError:action.error,status:'error'});
            break;
          default:
            return Object.assign({},state,{status:'loading', firstLoad : false});
            break;
        }
        break;
      case 'UPDATE_QUERY':
        var newQuery = Object.assign({},state.query,action.query);
        return Object.assign({},state,{query:newQuery});
        break;
      case 'SET_SELECTED_POST':
        return Object.assign({},state,{selectedPost:action.post});
        break;
      default :
      return state;
    }
  }
</script>
