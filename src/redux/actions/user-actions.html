
<script>
  const UserActionsBehavior = {
    actions : {
      updateUserInfo:function(contactInfo){
        return function(dispatch){
            dispatch({type:'SET_USER_INF'});
            let request = new Request(
              '/updateuserinfo',{
              method:'POST',
              headers: standardHeaders,
              body: JSON.stringify(contactInfo),
              credentials: 'include'
            });
            window.fetch(request)
            .then(handleReqError)
            .then((response)=>{
              response.json().then((json)=>{
                dispatch({type:'SET_USER_INF',status:'success',info:json});
              });
            })
            .catch((e)=>{
              dispatch({type:'SET_USER_INF',status:'error',error:e.message});
            });
        }
      },
      updateIntlCredential:function(newCredential){
        return function(dispatch){
          dispatch({type:'SET_USER_INF'});
          let request = new Request(
            '/updateintlcredential',{
            method:'POST',
            headers: standardHeaders,
            credentials: 'include',
            body: JSON.stringify(newCredential),
          });
          window.fetch(request)
          .then(handleReqError)
          .then((response)=>{
            response.json().then((json)=>{
              dispatch({type:'SET_USER_INF',status:'success',info:json});
            });
          })
          .catch((e)=>{
            dispatch({type:'SET_USER_INF',status:'error',error:e.message});
          });
        }
      },
      loadRecommender:function(id){
        return function(dispatch){
          dispatch({type:'GET_RECO'});
          let request = new Request(
            '/getRecommenderUser',
            {
              method:'POST',
              headers:standardHeaders,
              credentials: 'include',
              body: JSON.stringify(id)
            }
          );
          window.fetch(request)
            .then(handleReqError)
            .then((response)=>{
              response.json().then((json)=>{
                dispatch({type:'GET_RECO',status:'success',info:json.recommender});
              });
            })
            .catch((e)=>{
              dispatch({type:'GET_RECO',status:'error',error:e.message})
            });
        };
      },
      updateUserRecommender : function(recommender){
        return function(dispatch){
          dispatch({type:'SET_USER_RECO'});
          let request = new Request(
            '/setRecommender',{
            method:'POST',
            headers: standardHeaders,
            credentials: 'include',
            body: JSON.stringify(recommender),
          });
          window.fetch(request)
          .then(handleReqError)
          .then((response)=>{
            dispatch({type:'SET_USER_RECO',status:'success',info:this.getState().recommender.info});
          })
          .catch((e)=>{
            dispatch({type:'SET_USER_RECO',status:'error',error:e.message});
          });
        }
      },
      updateUserBillingInfo : function(info){
        return function(dispatch){
          dispatch({type:'SET_USER_BILLING_INFO'});
          let request = new Request(
            '/updatebillinginfo',{
            method:'POST',
            headers: standardHeaders,
            credentials: 'include',
            body: JSON.stringify(info),
          });
          window.fetch(request)
          .then(handleReqError)
          .then((res)=>{
            res.json().then((json)=>{
              dispatch({type:'SET_USER_BILLING_INFO',status:'success',info:json.info});
            });
          })
          .catch((e)=>{
            dispatch({type:'SET_USER_BILLING_INFO',status:'error',error:e.message});
          });
        }
      }

    },
    _getArrayFromObj:function(obj){
      return ;
    }
  }
</script>
